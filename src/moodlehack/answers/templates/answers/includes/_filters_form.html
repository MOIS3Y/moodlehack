{% load i18n %}

<form method="get" 
      action="{% url 'answers:index' %}" 
      id="filter-form"
      hx-get="{% url 'answers:index' %}" 
      hx-target="#answers" 
      hx-push-url="true">
  
  <div class="mb-3">
    <label class="form-label small fw-bold text-uppercase text-secondary">{% translate "Category" %}</label>
    <select name="category" class="form-select form-select-sm"> 
      <option value="">{% translate "All categories" %}</option>
      {% for cat in categories %}
        <option value="{{ cat.id }}" {% if request.GET.category == cat.id|stringformat:"i" %}selected{% endif %}>
          {{ cat.name }}
        </option>
      {% endfor %}
    </select>
  </div>
  
  <div class="mb-3">
    <label class="form-label small fw-bold text-uppercase text-secondary">{% translate "Status" %}</label>
    <select name="status" class="form-select form-select-sm">
      <option value="">{% translate "All statuses" %}</option>
      {% for status_val, status_name in status_choices %}
        <option value="{{ status_val }}" {% if request.GET.status == status_val %}selected{% endif %}>
          {{ status_name }}
        </option>
      {% endfor %}
    </select>
  </div>

  <hr class="my-3 opacity-25">

  <div class="row g-2 mb-3">
    <div class="col-6">
      <label class="form-label small fw-bold text-uppercase text-secondary">{% translate "Year" %}</label>
      <select name="year" class="form-select form-select-sm">
        <option value="">{% translate "All" %}</option>
        {% for y_val, y_name in year_choices %}
          <option value="{{ y_val }}" {% if request.GET.year == y_val|stringformat:"i" %}selected{% endif %}>
            {{ y_name }}
          </option>
        {% endfor %}
      </select>
    </div>
    <div class="col-6">
      <label class="form-label small fw-bold text-uppercase text-secondary">{% translate "Quarter" %}</label>
      <select name="quarter" class="form-select form-select-sm">
        <option value="">{% translate "All" %}</option>
        <option value="1" {% if request.GET.quarter == "1" %}selected{% endif %}>Q1</option>
        <option value="2" {% if request.GET.quarter == "2" %}selected{% endif %}>Q2</option>
        <option value="3" {% if request.GET.quarter == "3" %}selected{% endif %}>Q3</option>
        <option value="4" {% if request.GET.quarter == "4" %}selected{% endif %}>Q4</option>
      </select>
    </div>
  </div>

  <div class="mb-3">
    <label class="form-label small fw-bold text-uppercase text-secondary">{% translate "Month" %}</label>
    <select name="month" class="form-select form-select-sm">
      <option value="">{% translate "All months" %}</option>
      {% for m_val, m_name in month_choices %}
        <option value="{{ m_val }}" {% if request.GET.month == m_val|stringformat:"i" %}selected{% endif %}>
          {{ m_name }}
        </option>
      {% endfor %}
    </select>
  </div>

  {% if request.GET.q %}
    <input type="hidden" name="q" value="{{ request.GET.q }}">
  {% endif %}

  <div class="d-grid gap-2 mt-4">
    <button type="submit" class="btn btn-primary btn-sm fw-bold">
      <i class="bi bi-check2-circle me-1"></i> {% translate "Apply" %}
    </button>
    
    <a href="{% url 'answers:index' %}" class="btn btn-outline-secondary btn-sm border-0">
      <i class="bi bi-arrow-counterclockwise me-1"></i> {% translate "Reset all" %}
    </a>
  </div>
</form>
